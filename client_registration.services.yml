parameters:
  client_registration.http_client.config:
    base_uri: '%env.client_registration.base_uri%'
    headers:
      Accept: application/json
      Content-Type: application/json

services:
  register_client:
    class: Drupal\client_registration\Api\RegisterClient
    arguments:
      - '@module.http_client'
  module.http_client:
    class: GuzzleHttp\Client
    factory: http_client_factory:fromOptions
    arguments: [ '%client_registration.http_client.config%' ]
  client_registration.container_parameters.http_client:
    class: Drupal\client_registration\ContainerParameters\HttpClientMapping
    tags:
      - { name: container_parameters }
